(function(e){function t(t){for(var r,o,i=t[0],u=t[1],s=t[2],d=0,b=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(b.length)b.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==c[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},c={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/near-ft/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},2967:function(e,t,n){"use strict";n("e14e")},3:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("5530"),c=n("1da1"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("7a23")),o={class:"container"};function i(e,t,n,r,c,i){var u=Object(a["i"])("SignIn"),s=Object(a["i"])("Token");return Object(a["h"])(),Object(a["d"])("div",o,[i.user?Object(a["c"])("",!0):(Object(a["h"])(),Object(a["b"])(u,{key:0})),i.user?(Object(a["h"])(),Object(a["b"])(s,{key:1})):Object(a["c"])("",!0)])}var u=n("798b"),s=n.n(u),l=Object(a["e"])("img",{src:s.a,alt:"",width:"150"},null,-1),d=Object(a["e"])("h1",{class:"mt-4"},"BLA BLA Token",-1),b=Object(a["e"])("p",null," Please SignIn using NEAR wallet to join BlaBla community: ",-1);function f(e,t,n,r,c,o){return Object(a["h"])(),Object(a["d"])("div",null,[l,d,b,Object(a["e"])("button",{onClick:t[0]||(t[0]=function(e){return o.signIn()}),class:"btn btn-primary"},"Sign In")])}var p={name:"SignIn",methods:{signIn:function(){window.wallet.requestSignIn(window.nearConfig.contractName,"NEAR NFT Test")}}},m=n("6b0d"),w=n.n(m);const O=w()(p,[["render",f]]);var j=O,h={class:"mb-3"},g=Object(a["f"])(" Welcome, "),v={class:"mt-5"},k={key:0},y=Object(a["e"])("img",{src:s.a,alt:"",width:"150",class:"mb-3"},null,-1),x=Object(a["f"])("Your Balance: "),B={class:"text-left col-4 offset-4 mt-5"},I=Object(a["e"])("h5",{class:"text-center"},"Transfer BlaBla Token",-1),_={class:"mb-2"},A=Object(a["e"])("label",{class:"form-label mb-1"},"NEAR Address",-1),S={class:"mb-3"},T=Object(a["e"])("label",{class:"form-label mb-1"},"Amount",-1),U={class:"row"},C={class:"col-6 d-grid"},R=["disabled"],N={class:"col-6 d-grid"},M=["disabled"],E={key:1},L=Object(a["e"])("p",null,"Your need some BLABLA tokens:",-1);function P(e,t,n,r,c,o){return Object(a["h"])(),Object(a["d"])("div",null,[Object(a["e"])("h2",h,[g,Object(a["e"])("b",null,Object(a["j"])(o.user.accountId),1),o.user?(Object(a["h"])(),Object(a["d"])("button",{key:0,class:"btn btn-outline-secondary sign-out",onClick:t[0]||(t[0]=function(e){return o.signOut()})},"SIGN OUT")):Object(a["c"])("",!0)]),Object(a["e"])("div",v,[c.tokenBalance>0?(Object(a["h"])(),Object(a["d"])("div",k,[y,Object(a["e"])("h4",null,[x,Object(a["e"])("b",null,Object(a["j"])(c.tokenBalance)+" BLABLA",1)]),Object(a["e"])("div",B,[I,Object(a["e"])("div",_,[A,Object(a["l"])(Object(a["e"])("input",{type:"text",required:"",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.address=e})},null,512),[[a["k"],c.address]])]),Object(a["e"])("div",S,[T,Object(a["l"])(Object(a["e"])("input",{type:"number",required:"",min:"0",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.amount=e})},null,512),[[a["k"],c.amount]])]),Object(a["e"])("div",U,[Object(a["e"])("div",C,[Object(a["e"])("button",{class:Object(a["g"])(["btn",{"btn-primary":!o.canTransfer,"btn-outline-info":o.canTransfer}]),disabled:o.canTransfer,onClick:t[3]||(t[3]=function(){return o.approve&&o.approve.apply(o,arguments)})}," 1. Approve ",10,R)]),Object(a["e"])("div",N,[Object(a["e"])("button",{class:Object(a["g"])(["btn",{"btn-primary":o.canTransfer,"btn-outline-info":!o.canTransfer}]),disabled:!o.canTransfer,onClick:t[4]||(t[4]=function(){return o.transfer&&o.transfer.apply(o,arguments)})}," 2. Transfer ",10,M)])])])])):Object(a["c"])("",!0),0==c.tokenBalance?(Object(a["h"])(),Object(a["d"])("div",E,[L,Object(a["e"])("button",{onClick:t[5]||(t[5]=function(e){return o.claim()}),class:"btn btn-primary"},"Claim 100 BLABLA")])):Object(a["c"])("",!0)])])}n("ac1f"),n("5319"),n("b680"),n("d3b7"),n("25f0");var F=n("9dcd"),q=n.n(F),V={name:"Token",computed:{user:function(){return window.currentUser},canTransfer:function(){return localStorage.getItem(this.address)}},data:function(){return{tokenBalance:0,address:"",amount:""}},created:function(){this.loadMyBalance()},methods:{signOut:function(){window.wallet.signOut(),window.location.replace(window.location.origin+window.location.pathname)},loadMyBalance:function(){var e=this;window.contract.ft_balance_of({account_id:window.currentUser.accountId}).then((function(t){e.tokenBalance=t}))},claim:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=q()(3).times(Math.pow(10,13)).toFixed(),e.next=3,window.contract.ft_mint({receiver_id:window.currentUser.accountId,amount:"100"},t,"1000000000000000000000");case 3:case"end":return e.stop()}}),e)})))()},approve:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return localStorage.setItem(e.address,"true"),n=q()(3).times(Math.pow(10,13)).toFixed(),t.next=4,window.contract.ft_mint({receiver_id:e.address,amount:"0"},n,"1000000000000000000000");case 4:case"end":return t.stop()}}),t)})))()},transfer:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.currentUser.accountId!==e.address){t.next=3;break}return alert("Error: Sender and receiver should be different"),t.abrupt("return");case 3:if(!(parseInt(e.amount)>e.tokenBalance)){t.next=6;break}return alert("Error: Not enough balance"),t.abrupt("return");case 6:return n=q()(3).times(Math.pow(10,13)).toFixed(),t.next=9,window.contract.ft_transfer({receiver_id:e.address,amount:e.amount.toString()},n,1);case 9:case"end":return t.stop()}}),t)})))()}}};n("d0ec");const J=w()(V,[["render",P]]);var W=J,Y={name:"App",computed:{user:function(){return window.currentUser}},components:{SignIn:j,Token:W}};n("2967");const D=w()(Y,[["render",i]]);var G=D,K=n("db49"),z=n.n(K),H=n("d9eb");function Q(){return X.apply(this,arguments)}function X(){return X=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,c,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=z()("production"),e.next=3,H["connect"](Object(r["a"])({deps:{keyStore:new H["keyStores"].BrowserLocalStorageKeyStore}},t));case 3:if(n=e.sent,c=new H["WalletConnection"](n),!c.getAccountId()){e.next=11;break}return e.t0=c.getAccountId(),e.next=9,c.account().state();case 9:e.t1=e.sent.amount,a={accountId:e.t0,balance:e.t1};case 11:return e.next=13,new H["Contract"](c.account(),t.contractName,{viewMethods:["ft_balance_of"],changeMethods:["ft_transfer","ft_mint"],sender:c.getAccountId()});case 13:return o=e.sent,e.abrupt("return",{contract:o,currentUser:a,nearConfig:t,walletConnection:c});case 15:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}Q().then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.contract=t.contract,window.currentUser=t.currentUser,window.nearConfig=t.nearConfig,window.wallet=t.walletConnection,Object(a["a"])(G).mount("#app");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},"798b":function(e,t,n){e.exports=n.p+"img/blabla.3bb9578c.png"},d0ec:function(e,t,n){"use strict";n("d7b2")},d7b2:function(e,t,n){},db49:function(e,t){var n=Object({NODE_ENV:"production",BASE_URL:"/near-ft/"}).CONTRACT_NAME||"ft.vlodkow.testnet";function r(e){switch(e){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"production":case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}e.exports=r},e14e:function(e,t,n){}});
//# sourceMappingURL=app.7d6bbaf4.js.map